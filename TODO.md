# HeartBridge - Ask 프로젝트 개발 TODO

**개발 전략**: UI 우선 개발 → Mock 데이터로 테스트 → UI 확정 → 백엔드 구현

**마지막 업데이트**: 2025-01-26

---

## 📌 현재 진행 상황

- [x] 프로젝트 구조 설계 완료
- [x] 디렉토리 생성 및 기본 설정 파일 작성
- [x] CLAUDE.md 작성 (전체 프로젝트 가이드)
- [x] Ask/README.md 작성
- [x] UI 디자인 방향성 결정
- [🔄] 디자인 시스템 구축 (테마 설정, CSS) ← **현재 단계**

---

## Phase 1: UI 디자인 및 프로토타입 (Mock 데이터 사용)

### 1-1. UI 디자인 결정 ✅ **완료**

**최종 결정사항 (2025-01-26)**

- ✅ **스타일**: 친근하고 따뜻한 스타일
  - 부드러운 곡선, 따뜻한 파스텔톤
  - 반려동물 앱처럼 귀엽고 친근한 느낌
  - 장점: 접근성, 사용자 친화적

- ✅ **색상 테마**: 따뜻한 오렌지/베이지 계열
  - Primary Color: `#F4A460` (따뜻한 오렌지)
  - Secondary Color: `#F5E6D3` (베이지)
  - Accent Color: `#FF8C42` (밝은 오렌지)
  - Background: `#FFFAF0` (아이보리)

- ✅ **레이아웃 구조**: 5페이지
  1. 랜딩 페이지 (서비스 소개)
  2. 기본 정보 입력 (강아지 이름, 이메일)
  3. 설문 페이지 (5개 질문, 각 선택형 5개 옵션)
  4. 이미지 업로드
  5. 분석 결과 페이지
  - 진행 바 (Progress Bar) 사용 ✅
  - 10페이지 이내로 구성
  - 로그인 기능 제외

- ✅ **마스코트**: "마리" 활용
  - 위치: `Ask/assets/images/`
  - 종류: 6개 이미지 (일반 4개, 가방 안 1개, 질문 1개)
  - 사용처: 랜딩, 설문, 결과 페이지

### 1-2. 기본 데이터 준비 ✅ **완료**

- [x] **기본 정보 입력 항목** (`Ask/config/survey_questions.py` - BASIC_INFO_FIELDS)
  - 강아지 이름 (텍스트)
  - 이메일 (텍스트, 선택)
  - 강아지 나이 (5개 선택: 퍼피/어린/성견/노견/모름)
  - 강아지 크기 (5개 선택: 초소형/소형/중형/대형/초대형)

- [x] **행동 분석 설문 7개** (`Ask/config/survey_questions.py` - BEHAVIOR_SURVEY_QUESTIONS)
  - Q1: 주요 문제 행동 (짖음/분리불안/공격성/파괴/배변)
  - Q2: 문제 발생 빈도 (항상/자주/가끔/드물게/최근)
  - Q3: 문제 발생 상황 (혼자/낯선사람/소리/관심요구/무작위)
  - Q4: 문제 시작 시기 (퍼피때/몇개월/몇주/갑자기/점진적)
  - Q5: 보호자 대응 방법 (무시/혼냄/주의전환/달램/일관성없음)
  - Q6: 혼자 있는 시간 (거의없음/짧음/반나절/긴시간/불규칙)
  - Q7: 사회화 정도 (매우자주/정기적/가끔/거의없음/격리)

- [x] Mock 데이터 작성 (`Ask/src/utils/mock_data.py`)
  - 4가지 케이스별 상세 분석 결과
  - 과도한 짖음, 분리불안, 공격성, 배변 문제

### 1-3. Streamlit UI 구현
- [ ] **메인 앱 구조** (`Ask/app.py`)
  - Session state 관리
  - 페이지 라우팅 구조
  - 공통 컴포넌트 (헤더, 푸터)

- [ ] **페이지 1: 랜딩 페이지**
  - 서비스 소개 (HeartBridge Ask)
  - 마리 마스코트 이미지
  - 시작하기 버튼
  - 주요 기능 3가지 소개

- [ ] **페이지 2: 기본 정보 입력**
  - 강아지 이름 (필수)
  - 보호자 이메일 (선택)
  - 강아지 나이 선택 (5개 옵션)
  - 강아지 크기 선택 (5개 옵션)
  - 진행 바: 20% (Step 1/5)

- [ ] **페이지 3: 행동 분석 설문**
  - 7개 질문 순차 표시 또는 한 페이지에 전체
  - 각 질문마다 5개 선택지
  - 마리 질문 이미지 표시
  - 진행 바: 40% (Step 2/5)

- [ ] **페이지 4: 이미지 업로드**
  - 강아지 사진 업로드 (드래그 앤 드롭)
  - 미리보기
  - 파일 크기/형식 검증 (최대 5MB, JPG/PNG)
  - 재업로드 기능
  - 진행 바: 60% (Step 3/5)

- [ ] **페이지 5: AI 분석 중**
  - 로딩 애니메이션 (스피너)
  - 마리 이미지 + "분석 중..." 메시지
  - Mock 데이터 로딩 (2-3초 딜레이)
  - 진행 바: 80% (Step 4/5)

- [ ] **페이지 6: 분석 결과** (Mock 데이터 사용)
  - 행동 분석 요약
  - 전문가 의견 섹션
  - 액션 플랜 (4단계별)
  - 신뢰도 점수 표시
  - 공유 버튼 (인스타/이메일) - UI만
  - 진행 바: 100% (완료!)

### 1-4. UI 테스트 및 피드백
- [ ] 로컬 실행 테스트
- [ ] 사용자 플로우 체크
- [ ] 모바일 반응형 확인
- [ ] 피드백 수집 및 개선사항 정리

### 1-5. UI 확정
- [ ] 최종 디자인 결정
- [ ] 필요한 데이터 구조 명확화
- [ ] Phase 2 준비

---

## Phase 2: 백엔드 구현 (UI 확정 후)

### 2-1. 데이터 모델링
- [ ] Pydantic 모델 정의 (`Ask/src/database/models.py`)
  - SurveyResponse
  - AnalysisResult
  - User

### 2-2. AI 분석 구현
- [ ] AI 프롬프트 템플릿 작성 (`Ask/config/prompts.py`)
- [ ] 이미지 처리 로직 (`Ask/src/ai/vision_processor.py`)
- [ ] AI 분석 핵심 로직 (`Ask/src/ai/analyzer.py`)
- [ ] 전문가 지식 베이스 준비 (`Ask/data/knowledge_base/`)

### 2-3. 데이터베이스 연동
- [ ] Supabase 프로젝트 생성
- [ ] 테이블 스키마 설계
- [ ] Supabase 클라이언트 구현 (`Ask/src/database/supabase_client.py`)
- [ ] CRUD 작업 구현

### 2-4. 서비스 로직
- [ ] 리포트 생성 서비스 (`Ask/src/services/report_generator.py`)
- [ ] 이메일 전송 서비스 (`Ask/src/services/share_service.py`)
- [ ] 인스타그램 카드 생성 (Pillow)

### 2-5. 통합 및 테스트
- [ ] UI와 백엔드 연결
- [ ] Mock 데이터 → 실제 AI 응답으로 전환
- [ ] 전체 플로우 테스트
- [ ] 에러 핸들링 개선

---

## Phase 3: 배포 및 최적화

### 3-1. 배포 준비
- [ ] Streamlit Community Cloud 설정
- [ ] 환경 변수 설정 (secrets.toml)
- [ ] Google Sheets API 연동 (경영진 대시보드)

### 3-2. 테스트 및 최적화
- [ ] 단위 테스트 작성
- [ ] API 비용 모니터링
- [ ] 성능 최적화
- [ ] 로깅 시스템 구축

### 3-3. 출시
- [ ] 베타 사용자 테스트
- [ ] 피드백 반영
- [ ] 정식 출시

---

## 향후 확장 (Phase 4)

### 4-1. 기능 확장
- [ ] RAG 기반 전문가 지식 검색 (벡터 DB)
- [ ] 동영상 분석 기능
- [ ] 훈련 진행도 추적
- [ ] 커뮤니티 기능

### 4-2. HeartBridge 전체 확장
- [ ] 건강 관리 모듈 (Health/)
- [ ] 커뮤니티 모듈 (Community/)
- [ ] 통합 대시보드

---

## 참고 사항

### 우선순위
1. **Phase 1**: UI 프로토타입 (가장 중요, 사용자 경험 검증)
2. **Phase 2**: 백엔드 구현 (기능 완성)
3. **Phase 3**: 배포 및 안정화
4. **Phase 4**: 확장 기능

### 예상 소요 시간
- Phase 1: 1-2주
- Phase 2: 2-3주
- Phase 3: 1주
- **전체**: 약 4-6주

### 비용 예상
- 개발 단계 (Mock 사용): $0
- 테스트 단계 (AI 100회): ~$2
- 정식 운영 (월 30,000원): ~1,000회 분석 가능

---

## 이슈 및 메모

### 결정 필요 사항
- [ ] UI 디자인 스타일
- [ ] 색상 테마
- [ ] 설문 10개 최종 항목
- [ ] 인스타그램 카드 디자인

### 기술적 고민
- [ ] Streamlit vs 다른 프레임워크?
- [ ] 이미지 압축 방식
- [ ] 캐싱 전략

---

**다음 액션**: UI 디자인 방향성 논의 및 결정
